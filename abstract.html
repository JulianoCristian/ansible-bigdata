

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. Abstract &mdash; Ansible playbooks to construct Hadoop environment</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="Ansible playbooks to construct Hadoop environment" href="index.html" />
    <link rel="next" title="2. About hosts(inventory file)" href="hosts.html" />
    <link rel="prev" title="What is this document?" href="index.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>Ansible playbooks to construct Hadoop environment</span></a></h1>
        <h2 class="heading"><span>1. Abstract</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="index.html">What is this document?</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="hosts.html">2. About hosts(inventory file)</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="abstract">
<h1>1. Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h1>
<div class="section" id="about-playbooks">
<h2>1.1. About playbooks<a class="headerlink" href="#about-playbooks" title="Permalink to this headline">¶</a></h2>
<p>This is a library of playbooks to construct HDFS/YARN clusters.
You will have HDFS and YARN services with HA.</p>
<p>Although the configuration of OS and middlewares are not well tuned about performance,
this is enough to be used to construct small cluster.
In other words, if you would like to construct and manage large clusters,
you may need to configure OS and middlewares adequately.</p>
<p>To write these playbooks, <a class="reference external" href="https://bitbucket.org/dobachi/ansible-playbooks.git">dobachi&#8217;s ansible-playbooks</a>
and <a class="reference external" href="https://github.com/mcsrainbow/ansible-playbooks-cdh5">mcsrainbow&#8217;s ansible-playbooks-cdh5</a> are used as reference.</p>
</div>
<div class="section" id="feature">
<h2>1.2. Feature<a class="headerlink" href="#feature" title="Permalink to this headline">¶</a></h2>
<p>This project has the following functions.
Each function is available individually.</p>
<ul class="simple">
<li>Configuring Ansible execution environment</li>
<li>Booting EC2 instances for Hadoop cluster</li>
<li>Configuring HDFS/YARN with NameNode HA</li>
<li>Configuring CDH5&#8217;s Spark core on Client node</li>
<li>Configuring Spark community edition&#8217;s core on Client node</li>
<li>Configuring Ganglia for the resource visualization</li>
<li>Configuring InfluxDB and Grafana for the metrics visualization</li>
<li>Configuring Pseudo environment for test</li>
<li>Configuring Zeppelin for Spark notebook</li>
<li>Configuring fluentd and td-agent</li>
<li>Configuring Kafka cluster</li>
<li>Configuring Confluent cluster</li>
<li>Configuring Ambari</li>
<li>Configuring CUDA and cuDNN</li>
</ul>
</div>
<div class="section" id="servers">
<span id="sec-servers"></span><h2>1.3. Servers<a class="headerlink" href="#servers" title="Permalink to this headline">¶</a></h2>
<p>This project&#8217;s assumption about middleware components and servers.</p>
<p><strong>Servers for medium cluster</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Server</th>
<th class="head">Use for</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>master01</td>
<td>Primary NameNode, JournalNode, Zookeeper Server(id=1), Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>master02</td>
<td>JournalNode, Zookeeper Server(id=2), Primary ResourceManager,
Ganglia Slave</td>
</tr>
<tr class="row-even"><td>master03</td>
<td>JournalNode, Zookeeper Server(id=3), HistoryServer, Backup ResourceManager,
Backup NameNode, Ganglia Slave, Ganglia Master, InfluxDB, Grafana</td>
</tr>
<tr class="row-odd"><td>client01</td>
<td>Hadoop Client, Spark Core, Ganglia Slave, Zeppelin</td>
</tr>
<tr class="row-even"><td>slave01</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>slave02</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-even"><td>slave03</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>slave04</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-even"><td>slave05</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>kafka01</td>
<td>Kafka broker</td>
</tr>
<tr class="row-even"><td>kafka02</td>
<td>Kafka broker</td>
</tr>
<tr class="row-odd"><td>kafka03</td>
<td>Kafka broker</td>
</tr>
<tr class="row-even"><td>manage</td>
<td>Ambari server</td>
</tr>
</tbody>
</table>
<p><strong>Servers for large cluster</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Server</th>
<th class="head">Use for</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>master01</td>
<td>Primary NameNode, Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>master02</td>
<td>Backup NameNode, Ganglia Slave</td>
</tr>
<tr class="row-even"><td>master03</td>
<td>Primary ResourceManager, Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>master04</td>
<td>Backup ResourceManager, Ganglia Slave</td>
</tr>
<tr class="row-even"><td>master05</td>
<td>JournalNode, Zookeeper Server(id=1), Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>master06</td>
<td>JournalNode, Zookeeper Server(id=2), Ganglia Slave</td>
</tr>
<tr class="row-even"><td>master07</td>
<td>JournalNode, Zookeeper Server(id=3), Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>master08</td>
<td>HistoryServer, Ganglia Master, Ganglia Slave, InfluxDB, Grafana</td>
</tr>
<tr class="row-even"><td>client01</td>
<td>Hadoop Client, Spark Core, Ganglia Slave, Zeppelin</td>
</tr>
<tr class="row-odd"><td>slave01</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-even"><td>slave02</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>slave03</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-even"><td>slave04</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>slave05</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-even"><td>slave06</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>slave07</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-even"><td>slave08</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>slave09</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-even"><td>slave10</td>
<td>DataNode, NodeManager, Ganglia Slave</td>
</tr>
<tr class="row-odd"><td>kafka01</td>
<td>Kafka broker</td>
</tr>
<tr class="row-even"><td>kafka02</td>
<td>Kafka broker</td>
</tr>
<tr class="row-odd"><td>kafka03</td>
<td>Kafka broker</td>
</tr>
<tr class="row-even"><td>manage</td>
<td>Ambari server</td>
</tr>
</tbody>
</table>
<p><strong>Server for pseudo environment</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Server</th>
<th class="head">Use for</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pseudo</td>
<td>NameNode, DataNode, SecondaryNameNode, ResourceManager, NodeManager,
Spark-core, Spark history server</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>You can also configure InfluxDB, Grafana, Zeppelin by using playbooks</li>
</ul>
</div>
<div class="section" id="software-information">
<h2>1.4. Software information<a class="headerlink" href="#software-information" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Software</th>
<th class="head">Version</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>OS</td>
<td>CentOS6.6 or CentOS7.0</td>
</tr>
<tr class="row-odd"><td>Hadoop</td>
<td>CDH5.3</td>
</tr>
<tr class="row-even"><td>Spark</td>
<td>Spark1.2 of CDH5
or Spark community edition</td>
</tr>
<tr class="row-odd"><td>Ansible</td>
<td>Ansible 1.8.2 of EPEL</td>
</tr>
<tr class="row-even"><td>InfluxDB</td>
<td>Latest version of the community</td>
</tr>
<tr class="row-odd"><td>Graphana</td>
<td>1.9.1 of the community</td>
</tr>
<tr class="row-even"><td>Zeppelin</td>
<td>Latest version of the community</td>
</tr>
<tr class="row-odd"><td>Kafka</td>
<td>0.10.0.0</td>
</tr>
<tr class="row-even"><td>Confluent</td>
<td>3.0.0</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="prerequirement">
<h2>1.5. Prerequirement<a class="headerlink" href="#prerequirement" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>You can login to each server by SSH from the server where you execute ansible.</li>
<li>You can use &#8220;sudo&#8221; in each server.
If you cannot use sudo, you should access remote servers by root user.</li>
<li>When you manage EC2 instances, you need to use RSA key to login servers.
For example, CentOS6 community instance use RSA key with root user in SSH access.</li>
</ul>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="index.html">What is this document?</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="hosts.html">2. About hosts(inventory file)</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2014, dobachi.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>